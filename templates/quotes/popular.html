{% extends 'base.html' %}
{% block title %}–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ü–∏—Ç–∞—Ç—ã{% endblock %}
{% block content %}
  <h2>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ü–∏—Ç–∞—Ç—ã</h2>

  <form method="get" class="grid" style="align-items: end;">
    <div>
      <label>–ò—Å—Ç–æ—á–Ω–∏–∫
        <input type="text" name="source" value="{{ request.GET.source }}" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞" />
      </label>
    </div>
    <div>
      <label>–¢–∏–ø
        <select name="type">
          <option value="">–õ—é–±–æ–π</option>
          <option value="movie" {% if request.GET.type == 'movie' %}selected{% endif %}>–§–∏–ª—å–º</option>
          <option value="book" {% if request.GET.type == 'book' %}selected{% endif %}>–ö–Ω–∏–≥–∞</option>
          <option value="series" {% if request.GET.type == 'series' %}selected{% endif %}>–°–µ—Ä–∏–∞–ª</option>
          <option value="other" {% if request.GET.type == 'other' %}selected{% endif %}>–î—Ä—É–≥–æ–µ</option>
        </select>
      </label>
    </div>
    <div>
      <label>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
        <select name="sort">
          <option value="likes" {% if request.GET.sort == 'likes' or not request.GET.sort %}selected{% endif %}>–ü–æ –ª–∞–π–∫–∞–º</option>
          <option value="views" {% if request.GET.sort == 'views' %}selected{% endif %}>–ü–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞–º</option>
          <option value="created" {% if request.GET.sort == 'created' %}selected{% endif %}>–ü–æ –¥–∞—Ç–µ</option>
        </select>
      </label>
    </div>
    <div>
      <button type="submit">–§–∏–ª—å—Ç—Ä</button>
    </div>
  </form>

  {% if page_obj %}
    <ol start="{{ page_obj.start_index }}">
      {% for q in page_obj.object_list %}
        <li>
          <blockquote class="quote-text">{{ q.text }}</blockquote>
          <small>{{ q.source.name }} ‚Äî üëç {{ q.likes }} ¬∑ üëé {{ q.dislikes }} ¬∑ üëÅÔ∏è {{ q.views }}</small>
        </li>
      {% endfor %}
    </ol>

    <nav aria-label="pagination">
      <ul>
        {% if page_obj.has_previous %}
          <li><a href="?page={{ page_obj.previous_page_number }}&source={{ request.GET.source }}&type={{ request.GET.type }}&sort={{ request.GET.sort }}">–ù–∞–∑–∞–¥</a></li>
        {% else %}
          <li aria-disabled="true"><a>–ù–∞–∑–∞–¥</a></li>
        {% endif %}
        <li>–°—Ç—Ä. {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}</li>
        {% if page_obj.has_next %}
          <li><a href="?page={{ page_obj.next_page_number }}&source={{ request.GET.source }}&type={{ request.GET.type }}&sort={{ request.GET.sort }}">–í–ø–µ—Ä–µ–¥</a></li>
        {% else %}
          <li aria-disabled="true"><a>–í–ø–µ—Ä–µ–¥</a></li>
        {% endif %}
      </ul>
    </nav>
  {% else %}
    <p>–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π.</p>
  {% endif %}
{% endblock %}


